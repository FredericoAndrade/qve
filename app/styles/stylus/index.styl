// @import 'nib'

.index
  display inline-block
  width inherit
  // refer to http://24ways.org/2010/intro-to-css-3d-transforms/
  @keyframes rotate1
    0%
      transform rotateX(0*$rotate) translateZ($translate)
    5%
        transform rotateX(-(360*.33)+0*$rotate) translateZ($translate)
    33%
      transform rotateX(-(360*.33)+0*$rotate) translateZ($translate)
    38%
      transform rotateX(-(360*.66)+0*$rotate) translateZ($translate)
    66%
      transform rotateX(-(360*.66)+0*$rotate) translateZ($translate)
    71%
      transform rotateX(-(360*1)+0*$rotate) translateZ($translate)
    100%
      transform rotateX(-(360*1)+0*$rotate) translateZ($translate)

  @keyframes rotate2
    0%
      transform rotateX(1*$rotate) translateZ($translate)
    5%
        transform rotateX(-(360*.33)+1*$rotate) translateZ($translate)
    33%
      transform rotateX(-(360*.33)+1*$rotate) translateZ($translate)
    38%
      transform rotateX(-(360*.66)+1*$rotate) translateZ($translate)
    66%
      transform rotateX(-(360*.66)+1*$rotate) translateZ($translate)
    71%
      transform rotateX(-(360*1)+1*$rotate) translateZ($translate)
    100%
      transform rotateX(-(360*1)+1*$rotate) translateZ($translate)

  @keyframes rotate3
    0%
      transform rotateX(2*$rotate) translateZ($translate)
    5%
        transform rotateX(-(360*.33)+2*$rotate) translateZ($translate)
    33%
      transform rotateX(-(360*.33)+2*$rotate) translateZ($translate)
    38%
      transform rotateX(-(360*.66)+2*$rotate) translateZ($translate)
    66%
      transform rotateX(-(360*.66)+2*$rotate) translateZ($translate)
    71%
      transform rotateX(-(360*1)+2*$rotate) translateZ($translate)
    100%
      transform rotateX(-(360*1)+2*$rotate) translateZ($translate)

  .content
    min-height 73vh
    h1
      font-weight 100
      font-size 2.9em
      max-width 640px
      margin 30vh auto 80px
      line-height 1.4em

      span
        font-weight 800

        &#indexCycle
          position relative
          height 61px
          display inline-block
          -webkit-perspective 1000
          overflow hidden
          margin-bottom -14px

          span.indexCycleWrapper
            transform translateZ(- $translate)
            height 60px
            width 250px
            display block
            float right
            -webkit-transform-style preserve-3d

            a.indexCycleOption
              display block
              position absolute
              height 60px
              top 0px
              transition all 0.15s ease-in-out
              backface-visibility hidden
              width 100%
              text-align center
              padding 0
              font-size .9em
              background-color white
              // cursor pointer

              cycleAnimation()
                animation-duration 8s
                animation-timing-function cubic-bezier(.70,.3,.2,.99)
                animation-iteration-count infinite
                animation-delay 00s

              &:nth-of-type(1)
                transform rotateX(-360+0*$rotate) translateZ($translate)
                animation-name rotate1
                cycleAnimation()

              &:nth-of-type(2)
                transform rotateX(-360+1*$rotate) translateZ($translate)
                animation-name rotate2
                cycleAnimation()

              &:nth-of-type(3)
                transform rotateX(-360+2*$rotate) translateZ($translate)
                animation-name rotate3
                cycleAnimation()

    a
      display block
      max-width 640px
      margin auto
      text-align center
      font-size 1.1em
      font-family 'Merriweather'
      font-weight 300
      color $red
      font-style italic
      padding 3em 0

    .subIndex
      margin 20vh 20vh 0

      .subNav
        display none
        list-style-type none
        padding 5em 0
        border-top 1px solid #ddd
        border-bottom 1px solid #ddd
        margin 0 auto

        li
          margin 0 3em
          float left
          font-family "Merriweather", serif
          font-weight 400
          font-style italic
          font-size 1.1em
          cursor pointer
          color #ddd
          padding 0

          &.active
            color $red

      .subContent
        display none

        p
          bodyCopy()
          max-width 640px
          font-size 1.5em
          margin auto

          &:first-of-type
            margin-top 10vh
            margin-bottom 2em

            &:first-letter
              font-size 2em

          &:last-of-type
            margin-bottom 10vh
